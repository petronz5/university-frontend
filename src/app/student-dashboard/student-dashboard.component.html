<!-- src/app/student-dashboard/student-dashboard.component.html -->
<div *ngIf="student" class="card profile">
  <h2>Benvenuto, {{student.user.firstname}}!</h2>
  <p><strong>Matricola:</strong> {{student.enrollmentnumber}}</p>
  <p><strong>Corso di Laurea:</strong> {{student.degreeCourse?.name}}</p>
</div>

<div *ngIf="stats" class="card stats">
  <h3>Statistiche Voti</h3>
  <p>Media: {{stats.media | number:'1.2-2'}}</p>
  <p>CFU Totali: {{stats.cfu}}</p>
  <p>Media semplice: {{arithmeticAvg | number:'1.2-2'}}</p>
  <p>Media ponderata: {{weightedAvg   | number:'1.2-2'}}</p>
</div>

<div *ngIf="stats" class="card progress">
  <h3>Avanzamento CFU</h3>
  <progress max="180" [value]="stats.cfu"></progress>
  <span>{{stats.cfu}} / 180</span>
</div>

<div class="card grades">
  <h3>I miei Voti</h3>
  <ul>
    <li *ngFor="let g of grades">
      {{g.subject}}: {{g.grade}}
    </li>
  </ul>
</div>

<div *ngIf="registrations.length" class="card exams">
  <h3>Esami prenotati</h3>
  <ul>
    <li *ngFor="let r of registrations">
      {{ r.examsession.course.subject.name }}
        {{ r.examsession.examdate | date:'dd/MM/yyyy HH:mm' }}
    </li>
  </ul>
</div>

<!-- Materie & CFU -->
<div *ngIf="subjects.length" class="card subjects">
  <h3>Materie del piano</h3>
  <ul>
    <li *ngFor="let s of subjects">
      {{ s.name }} – {{ s.credits }} CFU
    </li>
  </ul>
</div>


<div *ngIf="registrations.length" class="card exams">
    <h3>Esami prenotati</h3>
    <ul>
        <li *ngFor="let r of registrations">
            {{ r.examsession.course.subject.name }}  
            ({{ r.examsession.date | date:'dd/MM/yyyy' }})
    </li>
    </ul>
</div>

<!-- Esami disponibili -->
<div *ngIf="availableExams.length" class="card exams-available">
  <h3>Esami disponibili</h3>
  <ul>
    <li *ngFor="let e of availableExams">
      {{ e.course.subject.name }}
      – {{ e.examdate | date:'dd/MM/yyyy HH:mm' }}
      <button (click)="bookExam(e.examsessionid)">Prenota</button>
    </li>
  </ul>
</div>


<!-- 3. Avanzamento CFU -->
<div *ngIf="stats" class="card progress">
  <h3>Avanzamento CFU</h3>
  <progress max="180" [value]="stats.cfu"></progress>
  <span>{{stats.cfu}} / 180 CFU</span>
</div>

<div *ngIf="availableCourses.length" class="card available">
  <h3>Corsi disponibili</h3>
  <ul>
    <li *ngFor="let c of availableCourses">
      {{c.subject}} (Sem. {{c.semester}})
      <button (click)="enroll(c.courseid)">Iscriviti</button>
    </li>
  </ul>
</div>




